{"componentChunkName":"component---src-templates-post-template-tsx","path":"/pnpm으로 모노레포 구축해보기/","result":{"data":{"allMarkdownRemark":{"nodes":[{"html":"<h2 id=\"모노레포의-개념\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC%EC%9D%98-%EA%B0%9C%EB%85%90\" aria-label=\"모노레포의 개념 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모노레포의 개념</h2>\n<p>모노레포의 개념은 조금 길어서 <a href=\"/Monorepo%EB%A5%BC%20%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90/\">해당 글</a>에 따로 정리했다.</p>\n<h2 id=\"모노레포-구축하기\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0\" aria-label=\"모노레포 구축하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모노레포 구축하기</h2>\n<h3 id=\"1-pnpm-설치하기\" style=\"position:relative;\"><a href=\"#1-pnpm-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\" aria-label=\"1 pnpm 설치하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. pnpm 설치하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-g</span> <span class=\"token function\">pnpm</span></code></pre></div>\n<p>npm 명령어로 pnpm을 설치한다</p>\n<h3 id=\"2-모노레포-설정하기\" style=\"position:relative;\"><a href=\"#2-%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"2 모노레포 설정하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 모노레포 설정하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> <span class=\"token punctuation\">[</span>폴더명<span class=\"token punctuation\">]</span>\n<span class=\"token builtin class-name\">cd</span> <span class=\"token punctuation\">[</span>폴더명<span class=\"token punctuation\">]</span>\n<span class=\"token function\">pnpm</span> init</code></pre></div>\n<h3 id=\"3-pnpm-workspaceyaml-에-packages-명시하기\" style=\"position:relative;\"><a href=\"#3-pnpm-workspaceyaml-%EC%97%90-packages-%EB%AA%85%EC%8B%9C%ED%95%98%EA%B8%B0\" aria-label=\"3 pnpm workspaceyaml 에 packages 명시하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. pnpm-workspace.yaml 에 packages 명시하기</h3>\n<p>프로젝트 구조는 아래와 같다</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">├──apps\n\t└── client\n    \n├──pakages\n\t├── ui\n\t├── types </code></pre></div>\n<p>workspace 안에 있는 모든 프로젝트를 루트 디렉토리의 <strong>pnpm-workspace.yaml</strong> 에 명시해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">// pnpm<span class=\"token punctuation\">-</span>workspace.yaml\n<span class=\"token key atrule\">packages</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token punctuation\">-</span> <span class=\"token string\">\"apps/*\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"packages/*\"</span></code></pre></div>\n<h2 id=\"모노레포-사용하기\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"모노레포 사용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모노레포 사용하기</h2>\n<p>모노레포의 기본적인 세팅을 했으니 사용하는 방법을 알아볼 것이다.</p>\n<h3 id=\"공통-dependency-설치하기\" style=\"position:relative;\"><a href=\"#%EA%B3%B5%ED%86%B5-dependency-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\" aria-label=\"공통 dependency 설치하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>공통 dependency 설치하기</h3>\n<p>모노레포에서는 root 에 dependency를 설치하면 하위 packaged에서 dependency를 설치할 필요 없이 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">pnpm</span> <span class=\"token function\">install</span> <span class=\"token punctuation\">[</span>dependency 이름<span class=\"token punctuation\">]</span></code></pre></div>\n<p>하지만 위 명령어로 설치한다면\n<code class=\"language-text\"> ERR_PNPM_ADDING_TO_ROOT </code> 라는 에러가 나온다.</p>\n<p>위 에러가 나는 이유는 pnpm 에서 root에 실수로 dependency를 설치하는것을 방지하기 위해서 에러가 난다.</p>\n<p>이를 해결하려면 <strong>-w</strong> 옵션을 사용해서 root에 dependency를 설치하는 것을 명시해 주어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">pnpm</span> <span class=\"token function\">install</span> <span class=\"token punctuation\">[</span>dependency 이름<span class=\"token punctuation\">]</span> <span class=\"token parameter variable\">-w</span></code></pre></div>\n<h3 id=\"각-package-접근하기\" style=\"position:relative;\"><a href=\"#%EA%B0%81-package-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0\" aria-label=\"각 package 접근하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 package 접근하기</h3>\n<p>각 package에는 <strong>--filter</strong> 또는 <strong>-F</strong> 옵션을 통해 접근할 수 있다.</p>\n<p>예를 들어 <code class=\"language-text\">client</code> 에 접근하고 싶다면 해당 명령어를  사용하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">pnpm</span> <span class=\"token parameter variable\">--filter</span> client <span class=\"token punctuation\">[</span>원하는 명령어<span class=\"token punctuation\">]</span>\n또는\n<span class=\"token function\">pnpm</span> <span class=\"token parameter variable\">--F</span> client <span class=\"token punctuation\">[</span>원하는 명령어<span class=\"token punctuation\">]</span></code></pre></div>\n<p>매번 명령어를 치는게 불편하다면, root의 <code class=\"language-text\">package.json</code> 에서 명령어를 지정할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">//package.json</span>\n<span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"client\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pnpm --filter client\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"ui\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pnpm --filter ui\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"types\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pnpm --filter types\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위와 같이 설정하면 <strong>--filter</strong> 또는 <strong>-F</strong> 없이도 아래와 같이 사용 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">pnpm</span> client <span class=\"token punctuation\">[</span>원하는 명령어<span class=\"token punctuation\">]</span></code></pre></div>\n<h3 id=\"package-공유하기\" style=\"position:relative;\"><a href=\"#package-%EA%B3%B5%EC%9C%A0%ED%95%98%EA%B8%B0\" aria-label=\"package 공유하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>package 공유하기</h3>\n<p><code class=\"language-text\">client</code> 에서 <code class=\"language-text\">ui</code> 에 있는 컴포넌트가 필요하다면 해당 명령어로 설치할 수 있다.</p>\n<ul>\n<li>root에서 명령어 입력</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">pnpm</span> <span class=\"token function\">add</span> ui <span class=\"token parameter variable\">-F</span> client <span class=\"token parameter variable\">--workspace</span></code></pre></div>\n<ul>\n<li>해당 폴더에서 명령어 입력</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">pnpm</span> <span class=\"token function\">add</span> ui <span class=\"token parameter variable\">--workspace</span></code></pre></div>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>모노레포 세팅을 다시 한번 정리하면서 명령어를 잘 숙지할수 있었다.\n다음에 모노레포를 사용할 일이 생기면 복습하는 개념으로 다시 봐도 좋을것 같다.</p>","frontmatter":{"title":"pnpm으로 모노레포 구축해보기","date":"2024.07.04","tags":["monorepo"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/4c243c908d3c399d3c3e7635ea97214e/88eeb/pnpm.webp","srcSet":"/static/4c243c908d3c399d3c3e7635ea97214e/23244/pnpm.webp 192w,\n/static/4c243c908d3c399d3c3e7635ea97214e/d4e33/pnpm.webp 384w,\n/static/4c243c908d3c399d3c3e7635ea97214e/88eeb/pnpm.webp 768w,\n/static/4c243c908d3c399d3c3e7635ea97214e/f80f8/pnpm.webp 1536w","sizes":"(min-width: 768px) 768px, 100vw"},"sources":[]},"width":768,"height":400}}}}}]}},"pageContext":{"slug":"/pnpm으로 모노레포 구축해보기/"}},"staticQueryHashes":["642825376"],"slicesMap":{}}